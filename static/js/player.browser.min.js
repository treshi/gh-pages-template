function regexEscape(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}
function getQueryParams(){var a=window.location.search.substring(1);if(""===a)return{};var d=encodeURI(a),e=decodeURIComponent(a),b={},h=!1,f=!1;if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(-1!=e.indexOf("?")&&(f=!0),-1!=d.indexOf("http%253A%252F%252F")||-1!=d.indexOf("https%253A%252F%252F"))h=!0;d=f?h?d.split("&"):encodeURIComponent(a).split("%26"):e.split("&");if(d.length)for(e=0;e<d.length;e++){var g=d[e],c=g.split("="),k=decodeURIComponent(c[0]),c=c[1];"undefined"===typeof c&&(c=
g.split("%3D"),k=decodeURIComponent(c[0]),c=c[1]);if(-1!=c.indexOf("http%253A%252F%252F")||-1!=c.indexOf("https%253A%252F%252F"))c=decodeURIComponent(c);c=decodeURIComponent(c);f&&!h&&-1!=c.indexOf("?")&&(g=(new RegExp(""+regexEscape(c)+"=(\\w+)&")).exec(a))&&g.length&&(c+="="+g[1]);b[k]=c}return b}function getMimeType(a){return-1!=a.indexOf(".mp4")?1:-1!=a.indexOf(".m3u8")?2:0}
function setFullscreenStyles(){var a=document.getElementById("baseCss");a.textContent+="#player,.video-js{position:absolute;width:100%;height:100%;top:0;left:0;}#header{display:none;}"}
function createVideoElem(a,d,e){var b=document.createElement("video"),h=document.createElement("source"),f=getMimeType(a);if(0===f)return alert("Filetype not supported!"),!1;if(1===f)f="video/mp4";else if(2===f){var f="application/vnd.apple.mpegurl",g=h.cloneNode();g.src=a;g.type="application/x-mpegURL"}e?(setFullscreenStyles(),b.width="100%",b.height="100%"):(b.width="640",b.height="480");d?(b.autoplay=1,b.autostart=1):b.preload="";h.src=a;h.type=f;b.controls=1;b.className="video-js";b.setAttribute("data-setup",
"{}");b.appendChild(h);g&&b.appendChild(g);document.getElementById("player").appendChild(b)}
window.onload=function(){var a=getQueryParams(),d="undefined"!==typeof a.video?encodeURI(a.video):!1,e="undefined"!==typeof a.autostart?!0:!1,b="undefined"!==typeof a.fullscreen?!0:!1;console.log("Request params:");console.dir(a);d&&""!==d?createVideoElem(d,e,b):(a=document.location.protocol+"//"+document.location.hostname+document.location.pathname+"?video=http://commondatastorage.googleapis.com/gtv-videos-bucket/big_buck_bunny_1080p.mp4",alert('You must specify a video source.\n\rAppend "?video=http://example.com/playlist.m3u8" for playlist or "?video=http://example.com/video.mp4" * for video files to the current URL. E.g.:\r\n\r\n'+
a),document.location.href=a)};
